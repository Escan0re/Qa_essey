a
Эссе: когда тестирование — вопрос безопасности
История знает немало трагичных и дорогих уроков о том, что «потом протестируем» — опасная стратегия.
Therac-25 (1985–1987). Программные гонки и отсутствие аппаратных «предохранителей» привели к передозировкам излучения. Ключевые ошибки процесса: переиспользование кода без переоценки рисков, слабая трассируемость требований к тестам, отсутствие независимой верификации, игнор редких последовательностей действий оператора.
Boeing 737 MAX (2018–2019). Система MCAS опиралась на одиночный датчик, а её поведение не было прозрачно для пилотов. Допущения не были полноценно «пробиты» сценариями отказов и интеграционными тестами, а анализ человеко-машинного взаимодействия оказался недостаточным.
Похожие по сути промахи встречались и в других случаях: разрушение Ariane 5 из-за некорректного преобразования типов; «сваливание» Knight Capital на бирже из-за неинициализированного флага и отсутствия безопасного «kill switch»; потеря Mars Climate Orbiter при несогласованности единиц измерения. Везде общий знаменатель — разрыв между предположениями разработчиков и реальным миром.
Принципы тестирования, которые могли бы предотвратить проблемы
Инженерия безопасности с первого дня (safety by design).


Идентификация опасностей (FMEA, STPA) и формализация «несчастливых путей».


Независимые аппаратно-программные барьеры (defense in depth): даже при баге ПО система не должна переходить в опасный режим.


Трассируемость требований → тестов → результатов.
 Каждое требование (включая «негативные» и безопасностные) должно иметь связанный набор тестов и артефактов прохождения. Любая регрессия — видна.


Тестирование отказов и допущений.


Fault injection: что, если датчик врет, молчит, колеблется?


Chaos/latency/fault testing на уровне интеграции.


Проверка устойчивости к «человеческим» ошибкам: неверная последовательность действий, быстрые повторные клики, отмены.


Независимая верификация и валидация (IV&V).
 Команда, не вовлечённая в разработку, проводит ревью требований, кода, планов тестирования и приемку. Для авиации — уровень покрытия вплоть до MC/DC (по DO-178C) для критичного кода.


Формальные методы и статический анализ для критичных модулей.
 Там, где «запрещено падать»: проверка инвариантов, типов, гонок, состояний (модели состояний, проверка свойств, дедлоков).


Системные интеграционные и «сквозные» тесты (end-to-end) на сценариях реальной эксплуатации.
 Тесты не только «как задумано», но и «как бывает»: неполные данные, шум, временные лаги, деградация.


Юзабилити и HMI-тестирование для безопасных действий.
 Интерфейс обязан помогать делать правильно и мешать делать опасно: явная индикация состояний, подтверждения для опасных операций, обучение.


Управление конфигурацией и выпуском.
 Канареечные релизы, возможность быстрого отката, kill-switch, мониторинг телеметрии и алерты на аномалии.


Культура пост-мортемов без поиска виноватых.
 Баги — повод улучшить процесс и автоматизацию, а не только «починить и забыть».


Документирование доменных ограничений.
 Любое критичное допущение (например, «датчик всегда корректен») должно жить в требованиях, а не в головах, и обязательно покрываться тестами.


Эти принципы не магия. Они превращают хрупкие системы в предсказуемые и «лениво ломающиеся»: если что-то идёт не так, это обнаруживается рано, безопасно и обратимо.

(*) Лист проверки базовой функциональности: форма регистрации пользователя
Минимальный, но строгий чек-лист, который удобно пройти руками и автоматизировать (UI-тесты + API-тесты). Сгруппировано по этапам.
1) Поля и валидации
Обязательные поля отмечены и не позволяют отправку пустой формы.


Email: корректный формат, обрезка пробелов, нормализация регистра, запрет Unicode-обманок в домене.


Пароль: минимум n символов; содержит буквы/цифры (или по политике); проверка «password123», «qwerty» и др. часто встречающихся.


Повтор пароля должен совпадать; несоответствие подсвечивается.


Имя/никнейм: максимальная длина; допустимые символы; эмодзи/диакритика обрабатываются корректно.


Чекбокс согласия с условиями/политикой — обязателен (если требуется законом).


Локализация сообщений об ошибках и подсказок соответствует выбранному языку.


2) Поведение UI/UX
Мгновенная валидация при вводе и при сабмите; ошибки читаемы и указывают на поле.


Кнопка «Зарегистрироваться» дизейблится при сабмите; повторный клик не создаёт дубликаты.


Состояния загрузки/успеха/ошибки визуально различимы.


Навигация с клавиатуры: порядок табов, фокус на первую ошибку.


A11y: лейблы связаны с инпутами, контраст достаточный, ошибки озвучиваются скринридером.


3) Серверная логика
Создание учётной записи невозможно с уже занятым email/ником; возвращается дружественное сообщение без утечки, что «email существует».


Нормализация email перед проверкой уникальности (lowercase локальной и доменной части, если политика позволяет).


Пароль не хранится и не логируется в чистом виде; используется современный хеш (например, Argon2/BCrypt с корректными параметрами).


Ограничение частоты запросов (rate limit) по IP/устройству/емейлу на эндпоинт регистрации.


CSRF-защита для формы (токен, проверка на сервере).


4) Подтверждение email (если включено)
Отправка письма выполняется асинхронно; система корректно реагирует даже при временной недоступности SMTP.


Письмо приходит, содержит корректную локализацию, имя приложения и срок действия ссылки.


Ссылка одноразовая, истекает; повторная активация сообщает понятное состояние.


«Отправить письмо ещё раз» доступно с анти-спам ограничением.


5) Ошибки и крайние случаи
Потеря сети во время сабмита — понятный ретрай, отсутствие дубликатов.


Таймаут сервиса — сообщение и возможность повторить.


«Грязные» данные: очень длинные строки, суррогатные пары Unicode, RTL-символы — система не падает и сохраняет корректно.


Ввод через мобильную клавиатуру: типы инпутов (email/password), автокоррекция не мешает.


6) Сессия и приватность
После подтверждения — безопасный автологин или понятный переход на логин.


Сессионная кука — HttpOnly, Secure, SameSite по политике; очистка куки при логауте.


Согласие с политикой — протоколируется (время/версия документа).


Логи не содержат PII сверх необходимого, пароли/токены скрыты.


7) Наблюдаемость и поддержка
Метрики: конверсия регистрации, ошибки по типам, доля недошедших писем.


Алерты на всплеск 4xx/5xx и на рост времени ответа.


Трассировка: корреляционный ID запроса в логах фронта и бэка.


8) Регресс и автоматизация (минимальный набор)
Unit-тесты: валидации полей и нормализация.


API-тесты: успешная регистрация, дубликат email, недоступная почта, истёкшая ссылка.


E2E-тест (headless): заполнение формы → письмо-заглушка → активация → вход.


Negative tests: пустые поля, XSS-попытки в имени, «двойной клик».


